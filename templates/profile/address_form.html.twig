{% extends 'base.html.twig' %}

{% block title %}{{ address.id ? 'Edit' : 'Add' }} Address - {{ parent() }}{% endblock %}

{% block body %}
<!-- Include Navigation -->
{% include 'components/navigation.html.twig' %}

<!-- Cookie Banner -->
{% include 'components/cookie_banner.html.twig' %}

<div class="min-h-screen bg-gradient-to-b from-gray-50 to-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {% include 'profile/_navigation.html.twig' %}

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        {{ address.id ? 'Edit' : 'Add New' }} Address
                    </h2>

                    <form method="post">
                        <!-- Address Type -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Address Type <span class="text-red-500">*</span>
                            </label>
                            <div class="grid grid-cols-3 gap-4">
                                <label class="flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition {{ address.type == 'shipping' or not address.id ? 'border-yellow-500 bg-yellow-50' : 'border-gray-200' }}">
                                    <input type="radio" name="type" value="shipping" {{ address.type == 'shipping' or not address.id ? 'checked' : '' }} class="mr-2">
                                    <div>
                                        <i class="fas fa-shipping-fast text-blue-600"></i>
                                        <span class="ml-1 font-medium">Shipping</span>
                                    </div>
                                </label>

                                <label class="flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition {{ address.type == 'billing' ? 'border-yellow-500 bg-yellow-50' : 'border-gray-200' }}">
                                    <input type="radio" name="type" value="billing" {{ address.type == 'billing' ? 'checked' : '' }} class="mr-2">
                                    <div>
                                        <i class="fas fa-file-invoice text-green-600"></i>
                                        <span class="ml-1 font-medium">Billing</span>
                                    </div>
                                </label>

                                <label class="flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition {{ address.type == 'personal' ? 'border-yellow-500 bg-yellow-50' : 'border-gray-200' }}">
                                    <input type="radio" name="type" value="personal" {{ address.type == 'personal' ? 'checked' : '' }} class="mr-2">
                                    <div>
                                        <i class="fas fa-home text-purple-600"></i>
                                        <span class="ml-1 font-medium">Personal</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Name Fields -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    First Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text"
                                       name="firstName"
                                       value="{{ address.firstName }}"
                                       required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                       placeholder="John">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Last Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text"
                                       name="lastName"
                                       value="{{ address.lastName }}"
                                       required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                       placeholder="Doe">
                            </div>
                        </div>

                        <!-- Company (Optional) -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Company <span class="text-gray-400">(Optional)</span>
                            </label>
                            <input type="text"
                                   name="company"
                                   value="{{ address.company }}"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                   placeholder="Company name">
                        </div>

                        <!-- Address Lines -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Address Line 1 <span class="text-red-500">*</span>
                            </label>
                            <input type="text"
                                   name="addressLine1"
                                   value="{{ address.addressLine1 }}"
                                   required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                   placeholder="Street address, P.O. box">
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Address Line 2 <span class="text-gray-400">(Optional)</span>
                            </label>
                            <input type="text"
                                   name="addressLine2"
                                   value="{{ address.addressLine2 }}"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                   placeholder="Apartment, suite, unit, building, floor">
                        </div>

                        <!-- City, Postal Code, State -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    City <span class="text-red-500">*</span>
                                </label>
                                <input type="text"
                                       name="city"
                                       value="{{ address.city }}"
                                       required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                       placeholder="City">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Postal Code <span class="text-red-500">*</span>
                                </label>
                                <input type="text"
                                       name="postalCode"
                                       value="{{ address.postalCode }}"
                                       required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                       placeholder="12345">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    State <span class="text-gray-400">(Optional)</span>
                                </label>
                                <input type="text"
                                       name="state"
                                       value="{{ address.state }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                       placeholder="State">
                            </div>
                        </div>

                        <!-- Country -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Country <span class="text-red-500">*</span>
                            </label>
                            <select name="country"
                                    required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition">
                                <option value="">Select a country</option>
                                <option value="US" {{ address.country == 'US' ? 'selected' : '' }}>United States</option>
                                <option value="CA" {{ address.country == 'CA' ? 'selected' : '' }}>Canada</option>
                                <option value="GB" {{ address.country == 'GB' ? 'selected' : '' }}>United Kingdom</option>
                                <option value="DE" {{ address.country == 'DE' ? 'selected' : '' }}>Germany</option>
                                <option value="FR" {{ address.country == 'FR' ? 'selected' : '' }}>France</option>
                                <option value="ES" {{ address.country == 'ES' ? 'selected' : '' }}>Spain</option>
                                <option value="IT" {{ address.country == 'IT' ? 'selected' : '' }}>Italy</option>
                                <option value="NL" {{ address.country == 'NL' ? 'selected' : '' }}>Netherlands</option>
                                <option value="AU" {{ address.country == 'AU' ? 'selected' : '' }}>Australia</option>
                                <option value="JP" {{ address.country == 'JP' ? 'selected' : '' }}>Japan</option>
                            </select>
                        </div>

                        <!-- Phone -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Phone Number <span class="text-gray-400">(Optional)</span>
                            </label>
                            <input type="tel"
                                   name="phone"
                                   value="{{ address.phone }}"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition"
                                   placeholder="+1 (555) 123-4567">
                        </div>

                        <!-- Set as Default -->
                        <div class="mb-6">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox"
                                       name="is_default"
                                       value="1"
                                       {{ address.isDefault ? 'checked' : '' }}
                                       class="w-5 h-5 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500">
                                <span class="ml-3 text-sm font-medium text-gray-700">
                                    Set as default {{ address.type ? address.type : 'shipping' }} address
                                </span>
                            </label>
                        </div>

                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('address_form') }}">

                        <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                            <a href="{{ path('app_profile_addresses') }}"
                               class="px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition">
                                <i class="fas fa-times mr-2"></i>Cancel
                            </a>

                            <button type="submit"
                                    class="px-8 py-3 bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-700 hover:to-yellow-600 text-white font-semibold rounded-lg transition shadow-lg">
                                <i class="fas fa-save mr-2"></i>{{ address.id ? 'Update' : 'Add' }} Address
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1">
                {% include 'profile/_sidebar.html.twig' %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
